{% extends "base.html" %}
{% block content %}

<div class="container mt-5">
  <div class="row">
    {% for group in groups %}
      <div class="col-lg-6 mb-4">
        <div class="card h-100">

          {% if group.img_url %}
          <img src="{{ group.img_url or url_for('static', filename='images/default_group.png') }}"
               class="card-img-top"
               alt="Group Image"
               style="max-height: 200px; object-fit: cover;">

          {% endif %}

          <div class="card-body">
            <h5 class="card-title">
              <a href="{{ url_for('group_detail', group_id=group.id) }}" class="text-decoration-none text-dark">
                {{ group.name }}
              </a>
            </h5>

            <p class="card-text">{{ group.city }}, {{ group.state }}</p>

            {% if group.group_details %}
              <p class="card-text">{{ group.group_details }}</p>
            {% endif %}

            <div class="mt-2 d-flex flex-wrap gap-2">
              {% if group.website_address %}
                <a href="{{ group.website_address }}" class="btn btn-outline-secondary" target="_blank">Website</a>
              {% endif %}

              {% if group.social_media %}
                <a href="{{ group.social_media }}" class="btn btn-outline-secondary" target="_blank">Social</a>
              {% endif %}

              {% if group.map_url %}
                <a href="{{ group.map_url }}" class="btn btn-primary" target="_blank">Map</a>
              {% endif %}

              {% if current_user.is_authenticated and current_user.is_admin %}
                <a href="{{ url_for('edit_group', group_id=group.id) }}" class="btn btn-warning">Edit</a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% endblock %}
